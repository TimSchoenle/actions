{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "description": "Base configuration to handle custom versioning for all resources in this repository.",
  "extends": ["github>TimSchoenle/actions//configs/renovate/actions"],
  "regexManagers": [
    {
      "description": "Custom action versioning for monorepo",
      "fileMatch": ["(^|/)action\\.ya?ml$", "(^|/)workflow\\.ya?ml$", "^\\.github/workflows/.*\\.ya?ml$"],
      "matchStrings": [
        "uses: (?<depName>TimSchoenle/actions/(?<subPath>[\\w\\/-]+))@(?<currentValue>[0-9a-f]{40})\\s+#\\s+(?<currentDigest>.*)",
        "uses: (?<depName>TimSchoenle/actions/(?<subPath>[\\w\\/-]+))@(?<currentValue>actions-[^ #\\n\\r]+)"
      ],
      "lookupNameTemplate": "TimSchoenle/actions",
      "datasourceTemplate": "github-tags",
      "autoReplaceStringTemplate": "uses: {{depName}}@{{#if newValue}}{{newValue}}{{#if newDigest}} # {{newDigest}}{{/if}}{{/if}}"
    }
  ],
  "packageRules": [
    {
      "description": "Disable default github-actions manager for this monorepo to avoid conflation",
      "matchManagers": ["github-actions"],
      "matchPackageNames": ["TimSchoenle/actions"],
      "enabled": false
    },
    {
      "description": "Enable pinning for custom actions used via regex manager",
      "matchPackageNames": ["TimSchoenle/actions"],
      "pinDigests": true
    }
  ]
}
